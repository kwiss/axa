---
description: AXA Project Development Rules
globs: ["**/*"]
alwaysApply: true
---

# AXA Project Rules

## ðŸš¨ Critical Rules

1. **NEVER run `npm run dev` or `npm run build` without asking first**
2. **NEVER auto-start development servers**
3. **Respecter le design Figma Ã  la lettre** - ne pas improviser
4. No gradients on images
5. **Focus â‰  Selected** - Ne pas confondre ces deux Ã©tats!

## Tech Stack

- **Framework**: Next.js 16 (App Router)
- **Styling**: Tailwind CSS v4
- **Components**: Shadcn UI (new-york style)
- **Font principale**: Source Sans Pro (Source Sans 3)
- **Font hero**: Publico Headline (local, `/public/fonts/`) - PAS italic!
- **Icons**: Lucide React + SVGs custom (voir axa-design-system.mdc)

## File Structure

```
app/
â”œâ”€â”€ page.tsx              # Home (hero + trip selector + bottom sheet)
â”œâ”€â”€ form/
â”‚   â””â”€â”€ page.tsx          # Progressive form (7 sections avec debounce)
â”œâ”€â”€ plans/                # Plan selection (Ã  implÃ©menter)
â””â”€â”€ ...

components/
â”œâ”€â”€ ui/                   # Shadcn components (customized)
â”‚   â””â”€â”€ button.tsx        # avec variants selected, fullWidth, focus state
â””â”€â”€ axa/                  # Custom AXA components
    â”œâ”€â”€ Logo.tsx          # SVG AXA logo
    â”œâ”€â”€ FormHeader.tsx    # Header form avec Help icon, progress bar
    â”œâ”€â”€ YesNoButtons.tsx  # avec focus-visible state
    â”œâ”€â”€ InputWithSuffix.tsx  # avec focus-within state
    â”œâ”€â”€ InfoTooltip.tsx
    â”œâ”€â”€ DestinationPicker.tsx   # Full-screen modal avec images Unsplash
    â”œâ”€â”€ DateRangePicker.tsx     # Full-screen calendar, sÃ©lection continue
    â”œâ”€â”€ ReinsuranceBlock.tsx
    â””â”€â”€ index.ts                # Barrel export

public/
â”œâ”€â”€ hero.jpg              # Image hero (local, pas URL externe)
â””â”€â”€ fonts/
    â””â”€â”€ PublicoHeadline-*.otf  # Fonts locales (Bold, Extrabold)
```

## Import Patterns

```tsx
// UI Components
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";

// AXA Components
import { Header, ProgressBar, PlanCard } from "@/components/axa";

// Utils
import { cn } from "@/lib/utils";

// Icons
import { ChevronLeft, ChevronRight } from "lucide-react";
```

## Coding Standards

### Components
- Use "use client" directive for interactive components
- Prefer function components with TypeScript
- Extract reusable patterns to /components/axa/

### Styling
- Use Tailwind utility classes
- Use CSS variables from globals.css for theme colors
- Use `cn()` utility for conditional classes

### State Management
- React useState for local state
- URL params for navigation state
- Consider Zustand for complex global state

## Typography Classes

```tsx
// Hero title (Publico Headline - PAS italic!)
className="font-headline text-[32px] font-bold leading-8 text-white"

// Stats numbers (Publico Headline)
className="font-headline text-2xl font-extrabold"

// Headings (Source Sans Pro)
className="text-xl font-bold leading-7 text-[#111B1D]"

// Body
className="text-base leading-6 text-[#343C3D]"

// Labels/Buttons (UPPERCASE)
className="text-sm font-semibold uppercase tracking-[1px]"

// Small/Caption
className="text-xs text-[#757575]"
```

## Common Patterns

### Page with Sticky Footer
```tsx
<div className="min-h-screen bg-background flex flex-col">
  <Header />
  <ProgressBar />
  <div className="flex-1 px-6 py-6">{/* Content */}</div>
  <div className="sticky bottom-0 px-6 py-4 bg-background border-t">
    <Button fullWidth>CTA</Button>
  </div>
</div>
```

### Form Field
```tsx
<div className="space-y-2">
  <label className="text-sm font-medium">Label</label>
  <Input placeholder="Placeholder" />
</div>
```

### Selection Group
```tsx
<div className="space-y-3">
  {options.map(opt => (
    <SelectableCard
      key={opt.id}
      title={opt.title}
      isSelected={selected === opt.id}
      onSelect={() => setSelected(opt.id)}
    />
  ))}
</div>
```

## Checklist Before Commit

- [ ] No hardcoded strings (use constants)
- [ ] Proper TypeScript types
- [ ] Responsive design (mobile-first)
- [ ] Accessible (aria labels, keyboard nav)
- [ ] Loading states handled
- [ ] Error states handled
